<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Al‚ÄîMadina Shop</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
  :root{
    --bg:#0e0f12;
    --panel:#14161b;
    --muted:#7f8696;
    --text:#e9ecf1;
    --brand:#f0c24b;
    --brand-2:#ffd36e;
    --accent:#c9d6ff;
    --ring:0 0 0 3px rgba(240,194,75,.35);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    color:var(--text);
    background:linear-gradient(180deg,#0e0f12 0%, #12141a 100%);
  }

  /* utilities needed by auth UI */
  .hidden{display:none !important}
  .linklike{background:transparent;border:none;color:var(--text);cursor:pointer;font:inherit;padding:.2rem .35rem}
  .linklike:hover{text-decoration:underline}

  .container{
    width:min(1200px, 92%);
    margin-inline:auto;
    display:grid;
    grid-template-columns: 260px 1fr;
    gap:2rem;
    padding-block:2rem 4rem;
  }

  .site-header{
    position:sticky; top:0; z-index:50;
    display:flex; align-items:center; justify-content:space-between;
    gap:1rem; padding:.8rem 1rem;
    background:rgba(14,15,18,.7); backdrop-filter:saturate(140%) blur(10px);
    border-bottom:1px solid #22262e;
  }
  .logo{display:flex; align-items:center; gap:.6rem; text-decoration:none; color:var(--text); font-weight:700}
  .logo-mark{color:var(--brand); font-size:1.2rem}
  .header-actions{display:flex; align-items:center; gap:.5rem;}
  .icon-btn{
    background:var(--panel); border:1px solid #252a33; color:var(--text); border-radius:.7rem;
    padding:.55rem .7rem; cursor:pointer;
  }
  .icon-btn:focus{outline:none; box-shadow:var(--ring)}
  .badge{
    background:var(--brand); color:#14120a; font-weight:700; font-size:.75rem;
    padding:.05rem .35rem; border-radius:.5rem; margin-left:.35rem;
  }

  .search{
    display:flex; gap:.5rem; flex:1; max-width:680px;
  }
  .search input{
    flex:1; padding:.65rem .8rem; border-radius:.7rem; border:1px solid #262a33; background:#0f1115; color:var(--text);
  }
  .btn{
    background:#007bff; border:1px solid #262a33; color:var(--text); padding:.65rem .9rem; border-radius:.7rem; cursor:pointer;
  }
  .btn:hover{border-color:#2f3541}
  .btn:focus{outline:none; box-shadow:var(--ring)}
  .btn-primary{background:linear-gradient(180deg, var(--brand), var(--brand-2)); color:#14120a; border:none; font-weight:700}
  .btn-ghost{background:transparent; border:1px dashed #2b303b; color:var(--muted)}

  .hero{
    display:grid; grid-template-columns: 1.2fr .8fr; gap:2rem; padding:2rem 1rem; align-items:center;
    border-bottom:1px solid #1e222b;
  }
  .hero-content h1{font-size:clamp(1.8rem, 3vw + 1rem, 3rem); margin:.2rem 0 .6rem}
  .hero-content p{color:var(--accent); max-width:60ch}
  .hero img{width:100%; height:100%; object-fit:cover; border-radius:1rem; border:1px solid #262a33}

  .filters{
    position:sticky; top:76px; align-self:start; background-color: #0e0f12; border:1px solid #262a33; border-radius:1rem; padding:1rem;
  }
  .filters h2{margin:.2rem 0 1rem}
  .filter-group{display:grid; gap:.35rem; margin-bottom:1rem;}
  select,input{color: white; background-color: #0e0f12;}

  .catalog{
    display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap:1rem;
  }
  .card{
    background:linear-gradient(180deg,#12151b 0%, #0f1116 100%);
    border:1px solid #262a33; border-radius:1rem; overflow:hidden; display:flex; flex-direction:column;
  }
  .card picture{display:block; aspect-ratio:1/1}
  .card img{width:100%; height:100%; object-fit:cover}
  .card .content{padding:0.8rem}
  .price{display:flex; align-items:center; justify-content:space-between; margin-top:.6rem}
  .badges{display:flex; gap:.4rem; flex-wrap:wrap; margin-top:.4rem}
  .badge-tag{font-size:.7rem; color:#0f1115; background:var(--brand); border-radius:.5rem; padding:.15rem .4rem}

  

  .cart{
    position:fixed; top:0; right:0; width:min(400px, 92%); height:100vh; background:#0f1115;
    transform:translateX(110%); transition:transform .28s ease;
    border-left:1px solid #262a33; z-index:60; display:flex; flex-direction:column;
  }
  .cart.open{transform:translateX(0)}
  .cart-header{display:flex; align-items:center; justify-content:space-between; padding:1rem; border-bottom:1px solid #22262e}
  .cart-items{flex:1; overflow:auto; padding:1rem; display:grid; gap:.8rem}
  .cart-item{display:grid; grid-template-columns:64px 1fr auto; gap:.6rem; align-items:center; background:#12141a; border:1px solid #22262e; border-radius:.8rem; padding:.5rem}
  .cart-item img{width:64px; height:64px; object-fit:cover; border-radius:.5rem}
  .qty{display:flex; align-items:center; gap:.4rem}
  .qty button{width:28px; height:28px; border-radius:.5rem; border:1px solid #2a2f39; background:#151821; color:var(--text); cursor:pointer}
  .cart-footer{border-top:1px solid #22262e; padding:1rem; background:#0f1115}
  .totals{display:flex; align-items:center; justify-content:space-between; font-size:1.05rem; margin-bottom:.6rem}
  .muted{color:var(--muted); font-size:.85rem}

  .overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.45); backdrop-filter: blur(2px);
    z-index:55;
  }

  .site-footer{border-top:1px solid #1e222b; padding:2rem 1rem; background:#0e1015}
  .footer-grid{width:min(1200px,92%); margin-inline:auto; display:grid; grid-template-columns:repeat(3,1fr); gap:2rem}
  .footer-grid h3{margin:.2rem 0 .6rem}
  .footer-grid ul{list-style:none; padding:0; margin:0}
  .footer-grid a{color:var(--text); text-decoration:none}
  .legal{text-align:center; color:var(--muted); margin-top:1.2rem}

  .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}

  @media (max-width: 920px){
    .container{grid-template-columns: 1fr}
    .hero{grid-template-columns: 1fr; padding:1rem}
    .filters{position:static; order:2}
  }

  @media (min-width: 600px) {
    .nav { max-width: 500px; }
  }

  /* Modals */
  .modal { position: fixed; inset: 0; background: rgba(145, 139, 139, 0.45); display: none; align-items: center; justify-content: center; padding: 1rem; z-index: 1100; }
  .modal[aria-hidden="false"] { display: flex; }
  .modal-content { background: rgb(86, 14, 14); width: 100%; max-width: 420px; border-radius: 10px; padding: 1rem 1.25rem; position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
  .modal-close { position: absolute; top: 10px; right: 10px; border: none; background: transparent; font-size: 1.1rem; cursor: pointer; }
  form { display: grid; gap: 0.75rem; margin-top: 0.5rem; }
  label { display: grid; gap: 0.25rem; font-size: 0.95rem; }
  input[type="text"], input[type="email"], input[type="password"] { padding: 0.6rem; border: 1px solid #ccc; border-radius: 6px; }
  .form-error{color:#f2f2f2; min-height:1.2em}

  

  /* Base header */
.site-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #2a2a2a;
  color: white;
  padding: 10px 20px;
  position: relative;
}

.logo {
  display: flex;
  align-items: center;
  text-decoration: none;
  color: white;
  font-weight: bold;
  font-size: 18px;
}

.logo img {
  margin-right: 8px;
}

/* Search */
.search {
  display: flex;
  margin: 10px 0;
}

.search input {
  flex: 1;
  padding: 6px 8px;
  font-size: 14px;
}

.search button {
  padding: 6px 12px;
  font-size: 14px;
  background: #007bff;
  color: white;
  border: none;
  cursor: pointer;
}

/* Navigation links */
.header-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 10px;
}

.header-actions a{
  background:none;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 1.6rem;
  font-weight: 300;
  text-decoration: none;
  border-radius: 7px;
  gap: 12rem;
}

.header-actions button {
  background:#0e0f12;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 1rem;
  text-decoration: none;
  border-radius: 7px;
}

.badge {
  background: red;
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
  margin-left: 2px;
}

/* Hamburger */
.hamburger {
  display: none;
  flex-direction: column;
  gap: 5px;
  cursor: pointer;
}

.hamburger span {
  display: block;
  width: 28px;
  height: 3px;
  background: white;
  border-radius: 2px;
  transition: 0.3s;
}

/* Mobile Menu */
.mobile-menu {
  display: flex;
  flex-direction: column;
}

/* Mobile only */
@media (max-width: 768px) {
  .mobile-menu {
    display: none; /* hidden by default */
    background: #444;
    padding: 15px;
    position: absolute;
    top: 60px;
    left: 0;
    width: 100%;
  }

  .mobile-menu.show {
    display: flex; /* show when toggled */
  }

  .header-actions {
    flex-direction: column;
    align-items: flex-start;
  }

  .hamburger {
    display: flex;
  }
}

  </style>
</head>
<body>

   <header class="site-header">
  <!-- Logo -->
  <a class="logo" href="#">
    <img src="water logo.jpg" width="50" style="border-radius:50%" alt="Al-Madina logo">
    <span class="logo-mark">‚óÜ</span> Al Madina<strong>Company</strong>
  </a>

  <!-- Hamburger -->
  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- Mobile Menu (Search + Navigation inside one box) -->
  <div class="mobile-menu" id="mobileMenu">
    <!-- Search -->
    <form id="searchForm" class="search" role="search">
      <input id="searchInput" type="search" placeholder="Search products‚Ä¶" aria-label="Search products" />
      <button class="btn" type="submit" aria-label="Search">Search</button>
    </form>

    <!-- Navigation -->
    <nav class="header-actions">
      <a href="Al Madina Company.html">Home</a>
      <a href="">About</a>
      <a href="">Contact</a>
      <button id="cartButton" class="icon-btn" aria-haspopup="dialog" aria-controls="cartDrawer" aria-label="Open cart">
        üõçÔ∏è <span id="cartCount" class="badge" aria-live="polite">0</span>
      </button>

      <div id="auth-controls">
        <button id="login-open" class="linklike" type="button">Login</button>
        /
        <button id="register-open" class="linklike" type="button">Register</button>
      </div>

      <div id="user-controls" class="hidden">
        <button id="profile-open" class="linklike" type="button">Profile</button>
        <span id="user-greeting"></span>
        <button id="logout-btn" class="linklike" type="button">Logout</button>
      </div>
    </nav>
  </div>
</header>


  <!-- Login Modal -->
  <div class="modal" id="modal-login" aria-hidden="true" role="dialog" aria-labelledby="login-title">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-login">‚úï</button>
      <h3 id="login-title">Login</h3>
      <form id="login-form">
        <label>Email
          <input type="email" name="email" required autocomplete="email"/>
        </label>
        <label>Password
          <input type="password" name="password" required autocomplete="current-password"/>
        </label>
        <label class="checkbox">
          <input type="checkbox" name="remember" /> Remember me
        </label>
        <button class="btn btn-primary" type="submit">Login</button>
        <p class="form-note">No account? <button type="button" class="linklike" id="switch-to-register">Register</button></p>
        <p class="form-error" id="login-error" role="alert"></p>
      </form>
    </div>
  </div>

  <!-- Register Modal -->
  <div class="modal" id="modal-register" aria-hidden="true" role="dialog" aria-labelledby="register-title">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-register">‚úï</button>
      <h3 id="register-title">Create account</h3>
      <form id="register-form">
        <label>Full name
          <input type="text" name="name" required/>
        </label>
        <label>Email
          <input type="email" name="email" required autocomplete="email"/>
        </label>
        <label>Password
          <input type="password" name="password" minlength="6" required autocomplete="new-password"/>
        </label>
        <button class="btn btn-primary" type="submit">Register</button>
        <p class="form-note">Already have an account? <button type="button" class="linklike" id="switch-to-login">Login</button></p>
        <p class="form-error" id="register-error" role="alert"></p>
      </form>
    </div>
  </div>

  <!-- Profile Modal -->
  <div class="modal" id="modal-profile" aria-hidden="true" role="dialog" aria-labelledby="profile-title">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-profile">‚úï</button>
      <h3 id="profile-title">My Profile</h3>
      <section class="profile-block">
        <div class="profile-row"><strong>Name:</strong> <span id="prof-name"></span></div>
        <div class="profile-row"><strong>Email:</strong> <span id="prof-email"></span></div>
      </section>
    </div>
  </div>

  <main class="container">
    <aside class="filters" aria-label="Filters">
      <h2>Filter</h2>
      <div class="filter-group">
        <label for="categorySelect">Category</label>
        <select id="categorySelect">
          <option value="all">All</option>
          <option value="Al-Madina pure water">Al-Madina bags of Pure water</option>
          <option value="Al-Madina table water">Al-Madina table water</option>
          <option value="cloth">Cloth</option>
          <option value="food">Foods</option>
          <option value="Jacket">Jacket</option>
          <option value="shoes">shoes</option>
          <option value="female shoes">female shoes</option>
          <option value="female bags">female bags</option>
          <option value="football jesey">football jesey</option>
          <option value="Army boot">Army boot</option>
          <option value="Army camorflag">Army Combat Dress</option>
          <option value="Mask">Mask</option>
          <option value="sunglass">sun glass</option>

        </select>
      </div>

      <div class="filter-group">
        <label for="sortSelect">Sort</label>
        <select id="sortSelect">
          <option value="featured">Featured</option>
          <option value="price-asc">Price: Low ‚Üí High</option>
          <option value="price-desc">Price: High ‚Üí Low</option>
          <option value="new">Newest</option>
        </select>
      </div>

      <button id="clearFilters" class="btn btn-ghost" type="button">Clear filters</button>
    </aside>

    <section id="catalog" class="catalog" aria-live="polite">
      <!-- Products render here -->
    </section>
  </main>

  <!-- Cart Drawer -->
  <div id="cartDrawer" class="cart" role="dialog" aria-modal="true" aria-labelledby="cartTitle" aria-hidden="true">
    <div class="cart-header">
      <h2 id="cartTitle">Cart</h2>
      <button id="closeCart" class="icon-btn" aria-label="Close cart">‚úï</button>
    </div>

    <div id="cartItems" class="cart-items">
      <!-- Items render here -->
    </div>

    <div class="cart-footer">
      <div class="totals">
        <span>Subtotal</span>
        <strong id="cartSubtotal">‚Ç¶0</strong>
      </div>
      <button id="checkoutBtn" class="btn btn-primary" type="button">Proceed to Checkout</button>
      <p class="muted">Taxes and shipping calculated at checkout.</p>
    </div>
  </div>

  <div id="overlay" class="overlay" hidden></div>

  <footer class="site-footer">
    <div class="footer-grid">
      <div>
        <h3>About</h3>
        <p>Crafted in small batches with responsible materials. Lifetime cleaning and 2‚Äëyear warranty.</p>
      </div>
      <div>
        <h3>Support</h3>
        <ul>
          <li><a href="#">Delivery all Nigeria & Pay on Delivery</a></li>
          <li><a href="#">Care Guide</a></li>
          <li><a href="#">Sizing</a></li>
        </ul>
      </div>
      <div>
        <h3>Newsletter</h3>
        <form id="newsletterForm">
          <label class="sr-only" for="email">Email</label>
          <input id="email" type="email" placeholder="you@example.com" required />
          <button class="btn" type="submit">Subscribe</button>
        </form>
      </div>
    </div>
    <p class="legal">¬© <span id="year"></span> Al-Madina. All rights reserved.</p>
  </footer>

  <script>
  /* ---------------- Catalog data (IDs are unique; categories map to the select above) ---------------- */
  const PRODUCTS = [
    { id: "Al-Madina water", name: "Al-Madina water (bag)", category: "Al-Madina pure water", price: 250, image: "Bags of water.jpg", tags: ["1 bag"], createdAt: "2025-07-01" },
    { id: "Al-Madina water", name: "Al-Madina table water (pack)", category: "Al-Madina table water", price: 1500, image: "Al madina table1.jpg", tags: ["1 pack"], createdAt: "2025-06-15" },
    { id: "cloth-1", name: "Casual Cloth (men)", category: "cloth", price: 42000, image: "Clo1.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "cloth-2", name: "Casual Cloth (women)", category: "cloth", price: 45000, image: "Clo2.jpg", tags: ["New"], createdAt: "2025-07-11" },
    { id: "Al-Madina water", name: "Al-Madina table water (pack)", category: "Al-Madina table water", price: 2000, image: "Al madina table1.jpg", tags: ["1 pack"], createdAt: "2025-06-15" },
    { id: "food-1", name: "Burger & Chips", category: "food", price: 3500, image: "burger and chips.jpg", tags: ["New"], createdAt: "2025-07-05" },
    { id: "jacket-3", name: "Jacket (men)", category: "Jacket", price: 42000, image: "Cloth 1.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Shoes", name: "Sneakers (men)", category: "shoes", price: 42000, image: "Sneaker 1.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "jacket-5", name: "Jacket (men)", category: "Jacket", price: 42000, image: "Cloth 3.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "jacket-6", name: "Jacket (men)", category: "jacket", price: 42000, image: "Cloth 4.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Mask", name: "Paintball (men)", category: "Mask", price: 42000, image: "Paintball Mask.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Shoes", name: " Sneakers (men)", category: "shoes", price: 42000, image: "men shoe.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "football jesey", name: " Barcelonla jesey (men)", category: "football jesey", price: 42000, image: "FCB.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "cloth", name: " Fashion Trend", category: "cloth", price: 42000, image: "Fashion trend 1.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Army", name: " Army Boot (men)", category: "Army boot", price: 42000, image: "Army boot.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Mask", name: "Black Mask (men)", category: "Mask", price: 42000, image: "Face mask.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "cloth", name: "Jogging (men)", category: "cloth", price: 42000, image: "jogging.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "shoes", name: "Black Shoe (men)", category: "shoes", price: 42000, image: "bl 2.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "jacket", name: "Jacket (men)", category: "Jacket", price: 42000, image: "cloth 7.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "female shoes", name: "Female shoe (women)", category: "female shoes", price: 42000, image: "female 1.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "sunglass", name: "Sun-Glass (men)", category: "sunglass", price: 42000, image: "sun glass 1.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "cloth", name: "Fashion Trend", category: "cloth", price: 42000, image: "Fashion trend.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "female bags", name: "Female bag (women)", category: "female bags", price: 42000, image: "pick bag.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "shoes", name: "Black Shoe (men)", category: "shoes", price: 42000, image: "Bl 4.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "female bags", name: "Female bag (women)", category: "female bags", price: 42000, image: "female bag 7.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "football jesey", name: " Barcelonla jesey (men)", category: "football jesey", price: 42000, image: "barcelona.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "female shoes", name: "Female shoe (women)", category: "female shoes", price: 42000, image: "female 11.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Shoes", name: " Sneakers (men)", category: "shoes", price: 42000, image: "mens shoes.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "sunglass", name: "Sun-Glass (men)", category: "sunglass", price: 42000, image: "sun glass 7.jpg", tags: ["New"], createdAt: "2025-07-10" },
    { id: "Army camorflag", name: " Army Combat Dress (men)", category: "Army camorflag", price: 42000, image: "combat .jpg", tags: ["New"], createdAt: "2025-07-10" },



  ];

  /* ---------------- Utilities ---------------- */
  const Naira = new Intl.NumberFormat("en-NG", { style: "currency", currency: "NGN", maximumFractionDigits: 0 });
  const $ = (sel, scope = document) => scope.querySelector(sel);
  const $$ = (sel, scope = document) => Array.from(scope.querySelectorAll(sel));

  const state = { query: "", category: "all", sort: "featured", cart: loadCart() };
  function saveCart() { localStorage.setItem("aurora_cart", JSON.stringify(state.cart)); }
  function loadCart() { return JSON.parse(localStorage.getItem("aurora_cart") || "{}"); }

  /* ---------------- Catalog rendering ---------------- */
  const catalogEl = $("#catalog");
  function renderCatalog() {
    let items = [...PRODUCTS];
    if (state.query.trim()) {
      const q = state.query.trim().toLowerCase();
      items = items.filter(p => [p.name, p.category, ...(p.tags||[])].join(" ").toLowerCase().includes(q));
    }
    if (state.category !== "all") { items = items.filter(p => p.category === state.category); }
    items = sortProducts(items, state.sort);

    catalogEl.innerHTML = items.map(cardHTML).join("");
    $$(".add-to-cart", catalogEl).forEach(btn => btn.addEventListener("click", () => addToCart(btn.dataset.id)));
  }
  function cardHTML(p) {
    return `
    <article class="card" data-id="${p.id}">
      <picture><img src="${p.image}" alt="${p.name}"></picture>
      <div class="content">
        <h3>${p.name}</h3>
        <div class="badges">${(p.tags||[]).map(t => `<span class="badge-tag">${t}</span>`).join("")}</div>
        <div class="price">
          <strong>${Naira.format(p.price)}</strong>
          <button class="btn btn-primary add-to-cart" data-id="${p.id}" aria-label="Add ${p.name} to cart">Add</button>
        </div>
      </div>
    </article>`;
  }
  function sortProducts(items, sort) {
    switch (sort) {
      case "price-asc": return items.sort((a,b) => a.price - b.price);
      case "price-desc": return items.sort((a,b) => b.price - a.price);
      case "new": return items.sort((a,b) => new Date(b.createdAt) - new Date(a.createdAt));
      default: return items;
    }
  }

  /* ---------------- Filters & search ---------------- */
  $("#searchForm").addEventListener("submit", (e) => { e.preventDefault(); state.query = $("#searchInput").value; renderCatalog(); });
  $("#categorySelect").addEventListener("change", (e) => { state.category = e.target.value; renderCatalog(); });
  $("#sortSelect").addEventListener("change", (e) => { state.sort = e.target.value; renderCatalog(); });
  $("#clearFilters").addEventListener("click", () => {
    state.query = ""; $("#searchInput").value = ""; state.category = "all"; $("#categorySelect").value = "all"; state.sort = "featured"; $("#sortSelect").value = "featured"; renderCatalog();
  });

  /* ---------------- Cart ---------------- */
  const cartDrawer = $("#cartDrawer");
  const overlay = $("#overlay");
  const cartCountEl = $("#cartCount");
  const cartItemsEl = $("#cartItems");
  const cartSubtotalEl = $("#cartSubtotal");

  $("#cartButton").addEventListener("click", openCart);
  $("#closeCart").addEventListener("click", closeCart);
  overlay.addEventListener("click", closeCart);
  document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeCart(); });

  function openCart() { cartDrawer.classList.add("open"); overlay.hidden = false; cartDrawer.setAttribute("aria-hidden", "false"); renderCart(); }
  function closeCart() { cartDrawer.classList.remove("open"); overlay.hidden = true; cartDrawer.setAttribute("aria-hidden", "true"); }

  function addToCart(id) { state.cart[id] = (state.cart[id] || 0) + 1; saveCart(); updateCartBadge(); animateAdd(); }
  function removeFromCart(id) { delete state.cart[id]; saveCart(); renderCart(); updateCartBadge(); }
  function setQty(id, qty) { if (qty <= 0) return removeFromCart(id); state.cart[id] = qty; saveCart(); renderCart(); updateCartBadge(); }

  function renderCart() {
    const entries = Object.entries(state.cart);
    if (entries.length === 0) { cartItemsEl.innerHTML = `<p class="muted">Your bag is empty.</p>`; cartSubtotalEl.textContent = Naira.format(0); return; }
    let subtotal = 0;
    cartItemsEl.innerHTML = entries.map(([id, qty]) => {
      const p = PRODUCTS.find(x => x.id === id); if (!p) return "";
      const line = p.price * qty; subtotal += line;
      return `
        <div class="cart-item">
          <img src="${p.image}" alt="${p.name}">
          <div>
            <strong>${p.name}</strong>
            <div class="muted">${Naira.format(p.price)} ‚Ä¢ ${p.category}</div>
            <div class="qty" role="group" aria-label="Quantity">
              <button aria-label="Decrease" data-id="${p.id}" class="dec">‚àí</button>
              <span>${qty}</span>
              <button aria-label="Increase" data-id="${p.id}" class="inc">+</button>
              <button aria-label="Remove item" data-id="${p.id}" class="rm" style="margin-left:.5rem">üóëÔ∏è</button>
            </div>
          </div>
          <div><strong>${Naira.format(line)}</strong></div>
        </div>`;
    }).join("");
    cartSubtotalEl.textContent = Naira.format(subtotal);
    $$(".inc", cartItemsEl).forEach(btn => btn.addEventListener("click", () => setQty(btn.dataset.id, (state.cart[btn.dataset.id]||1) + 1)));
    $$(".dec", cartItemsEl).forEach(btn => btn.addEventListener("click", () => setQty(btn.dataset.id, (state.cart[btn.dataset.id]||1) - 1)));
    $$(".rm", cartItemsEl).forEach(btn => btn.addEventListener("click", () => removeFromCart(btn.dataset.id)));
  }
  function updateCartBadge() { const count = Object.values(state.cart).reduce((a,b)=>a+b,0); cartCountEl.textContent = count; }
  function animateAdd() { cartCountEl.animate([{ transform: "scale(1)" }, { transform: "scale(1.25)" }, { transform: "scale(1)" }], { duration: 300 }); }

  /* ---------------- Newsletter & footer year ---------------- */
  $("#newsletterForm").addEventListener("submit", (e) => { e.preventDefault(); const email = $("#email").value.trim(); if (!email) return; alert(`Thanks for subscribing, ${email}!`); e.target.reset(); });
  $("#year").textContent = new Date().getFullYear();

  /* ---------------- Auth helpers (storage + hashing) ---------------- */
  function getUsers() { return JSON.parse(localStorage.getItem('users') || '[]'); }
  function setUsers(users) { localStorage.setItem('users', JSON.stringify(users)); }
  function setSession(session) { localStorage.setItem('session', JSON.stringify(session)); }
  function getSession() { return JSON.parse(localStorage.getItem('session') || 'null'); }
  function clearSession() { localStorage.removeItem('session'); }
  async function sha256(str) { const buf = new TextEncoder().encode(str); const hash = await crypto.subtle.digest('SHA-256', buf); return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2,'0')).join(''); }

  /* ---------------- Modals helpers ---------------- */
  function openModal(el){ el?.setAttribute('aria-hidden','false'); }
  function closeModal(el){ el?.setAttribute('aria-hidden','true'); }

  /* ---------------- Auth wiring ---------------- */
  const loginModal    = document.getElementById('modal-login');
  const registerModal = document.getElementById('modal-register');
  const profileModal  = document.getElementById('modal-profile');
  const loginOpen     = document.getElementById('login-open');
  const registerOpen  = document.getElementById('register-open');
  const logoutBtn     = document.getElementById('logout-btn');
  const userControls  = document.getElementById('user-controls');
  const authControls  = document.getElementById('auth-controls');
  const userGreeting  = document.getElementById('user-greeting');

  const loginForm     = document.getElementById('login-form');
  const registerForm  = document.getElementById('register-form');
  const loginErrorEl  = document.getElementById('login-error');
  const registerErrorEl = document.getElementById('register-error');
  const switchToRegister = document.getElementById('switch-to-register');
  const switchToLogin = document.getElementById('switch-to-login');

  // Open/close modals
  loginOpen?.addEventListener('click', () => openModal(loginModal));
  registerOpen?.addEventListener('click', () => openModal(registerModal));
  document.querySelectorAll('.modal-close').forEach(btn => btn.addEventListener('click', () => { const id = btn.getAttribute('data-close'); const el = document.getElementById(id); if (el) closeModal(el); }));
  switchToRegister?.addEventListener('click', () => { closeModal(loginModal); openModal(registerModal); });
  switchToLogin?.addEventListener('click', () => { closeModal(registerModal); openModal(loginModal); });
  document.getElementById('profile-open')?.addEventListener('click', () => {
    const s = getSession(); if (!s) { openModal(loginModal); return; }
    document.getElementById('prof-name').textContent = s.name;
    document.getElementById('prof-email').textContent = s.email;
    openModal(profileModal);
  });

  // Register
  registerForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    registerErrorEl.textContent = '';
    const form = new FormData(registerForm);
    const name = String(form.get('name') || '').trim();
    const email = String(form.get('email') || '').trim().toLowerCase();
    const password = String(form.get('password') || '');

    if (!name || !email || !password) { registerErrorEl.textContent = 'All fields are required.'; return; }
    if (password.length < 6) { registerErrorEl.textContent = 'Password must be at least 6 characters.'; return; }

    const users = getUsers();
    if (users.some(u => u.email === email)) { registerErrorEl.textContent = 'An account with this email already exists.'; return; }

    const passHash = await sha256(email + ':' + password);
    users.push({ name, email, passHash, createdAt: new Date().toISOString() });
    setUsers(users);

    setSession({ email, name });
    refreshAuthUI();
    closeModal(registerModal);
    alert(`Welcome, ${name}! Your account has been created.`);
  });

  // Login
  loginForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    loginErrorEl.textContent = '';
    const form = new FormData(loginForm);
    const email = String(form.get('email') || '').trim().toLowerCase();
    const password = String(form.get('password') || '');

    const users = getUsers();
    const user = users.find(u => u.email === email);
    if (!user) { loginErrorEl.textContent = 'Invalid email or password.'; return; }
    const passHash = await sha256(email + ':' + password);
    if (user.passHash !== passHash) { loginErrorEl.textContent = 'Invalid email or password.'; return; }

    setSession({ email, name: user.name });
    refreshAuthUI();
    closeModal(loginModal);
    alert(`Welcome back, ${user.name}!`);
  });

  // Logout
  logoutBtn?.addEventListener('click', () => { clearSession(); refreshAuthUI(); alert('You have been logged out.'); });

  function refreshAuthUI() {
    const session = getSession();
    if (session) {
      userGreeting.textContent = `Hello, ${session.name}`;
      userControls.classList.remove('hidden');
      authControls.classList.add('hidden');
      document.getElementById('prof-name').textContent = session.name;
      document.getElementById('prof-email').textContent = session.email;
    } else {
      userControls.classList.add('hidden');
      authControls.classList.remove('hidden');
      document.getElementById('prof-name').textContent = '';
      document.getElementById('prof-email').textContent = '';
    }
  }

  /* ---------------- Init ---------------- */
  renderCatalog();
  updateCartBadge();
  refreshAuthUI();

  const hamburger = document.getElementById("hamburger");
const mobileMenu = document.getElementById("mobileMenu");

hamburger.addEventListener("click", () => {
  mobileMenu.classList.toggle("show");
});


  </script>
</body>
</html>
